<?php
// include/header.php - KHÃ”NG Sá»¬ Dá»¤NG BOOTSTRAP
// ----------------------------
// Giáº£ Ä‘á»‹nh cÃ¡c biáº¿n cáº§n thiáº¿t:
// $user: chá»©a thÃ´ng tin user (náº¿u Ä‘Äƒng nháº­p), NULL náº¿u chÆ°a Ä‘Äƒng nháº­p.
// $categories: máº£ng chá»©a danh má»¥c (Ä‘Ã£ Ä‘Æ°á»£c query tá»« CSDL).
// ----------------------------

$isLoggedIn = isset($user) && $user;
$base_path = '../'; // Cáº§n Ä‘iá»u chá»‰nh náº¿u file á»Ÿ thÆ° má»¥c con
?>

<header class="main-header">
    <div class="header-left">
        <button class="sidebar-toggle-btn" id="sidebarToggle" title="áº¨n/Hiá»‡n Menu">
            &#9776;
        </button>

        <a href="<?php echo $base_path; ?>user/index.php" class="logo-link">
            <img src="<?php echo $base_path; ?>upload/logo/logo.png" alt="Logo">
        </a>
    </div>

    <nav class="header-nav">
        <ul>
            <!-- Danh má»¥c -->
            <li class="dropdown-container">
                <a href="#" class="dropdown-toggle" id="navbarDropdownCategories">
                    Danh má»¥c
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownCategories">
                    <?php if (!empty($categories)): ?>
                        <?php foreach ($categories as $cat): ?>
                            <li>
                                <a href="<?php echo $base_path; ?>user/search.php?cat_id=<?php echo htmlspecialchars($cat['category_id']); ?>">
                                    <?php echo htmlspecialchars($cat['name']); ?>
                                </a>
                            </li>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <li><a href="#">KhÃ´ng cÃ³ danh má»¥c</a></li>
                    <?php endif; ?>
                </ul>
            </li>
            <?php if(isset($_SESSION['user_id']) && $_SESSION['role'] == 2): ?>
    <li><a href="../staff/add_room.php">ÄÄƒng tin</a></li>
<?php endif; ?>
            
            <li><a href="<?php echo $base_path; ?>user/posts.php">BÃ i Ä‘Äƒng</a></li>
            <li><a href="<?php echo $base_path; ?>user/find_posts.php">BÃ i tÃ¬m trá»</a></li>

            <!-- User menu -->
            <li class="dropdown-container">
                <a href="#" class="dropdown-toggle" id="navbarDropdownUser">
                    <?php if ($isLoggedIn): ?>
                        <img src="<?php echo $base_path . htmlspecialchars($user['avatar']); ?>" 
                             alt="<?php echo htmlspecialchars($user['fullname']); ?>" 
                             class="user-avatar">
                    <?php else: ?>
                        ğŸ‘¤
                    <?php endif; ?>
                </a>

                <ul class="dropdown-menu" aria-labelledby="navbarDropdownUser">
                    <?php if ($isLoggedIn): ?>
                        <li class="dropdown-header">
                            <span><?php echo htmlspecialchars($user['fullname']); ?></span>
                        </li>
                        <li class="dropdown-divider"></li>

                        <?php if ($user['role'] == 2): ?>
                            <li><a href="<?php echo $base_path; ?>staff/add_post.php">ğŸ  ThÃªm BÃ i ÄÄƒng Trá»</a></li>
                        <?php elseif ($user['role'] == 1): ?>
                            <li><a href="<?php echo $base_path; ?>user/add_find_post.php">ğŸ” ThÃªm BÃ i TÃ¬m Trá»</a></li>
                        <?php endif; ?>

                        <li><a href="<?php echo $base_path; ?>user/profile.php">ğŸ‘¤ Há»“ sÆ¡</a></li>
                        <li class="dropdown-divider"></li>
                        <li><a href="<?php echo $base_path; ?>auth/logout.php">ğŸšª ÄÄƒng xuáº¥t</a></li>
                    <?php else: ?>
                        <li><a href="<?php echo $base_path; ?>auth/login.php">ğŸ”‘ ÄÄƒng nháº­p</a></li>
                        <li><a href="<?php echo $base_path; ?>auth/signup.php">â• ÄÄƒng kÃ½</a></li>
                    <?php endif; ?>
                </ul>
            </li>
        </ul>
    </nav>
</header>

ÄÃ¢y lÃ  header cÅ© báº¡n cÃ³ thá»ƒ tháº¥y nÃ³ cÅ©ng khÃ¡ Ä‘áº§y Ä‘á»§ rá»“i giá» tui muá»‘n tÃ¡ch ra cho 2 phÃ¢n quyá»n lÃ  ngÆ°á»i dÃ¹ng vÃ  chá»§ trá» nhÆ° sau
Váº«n giá»¯ Ä‘iá»u kiá»‡n chá»©a Ä‘Äƒng nháº­p vÃ  sau Ä‘Äƒng nháº­p nhÃ©
pháº§n header menu nhÆ° sau
NgÆ°á»i dÃ¹ng tÃ¬m trá» 
(=sidebar áº©n hiá»‡n) logo(trá» Ä‘áº¿n trang index cá»§a ngÆ°á»u dÃ¹ng khu vá»±c tÃ¬m trá» user/index.php)          Danh má»¥c(user/categorie.php)(chá»©a cÃ¡c danh má»¥c tráº¡ng thÃ¡i má»Ÿ 1 dáº«n Ä‘áº¿n user/detail_categorie)   TÃ¬m trá» (user/find_post.php) ÄÄƒng tÃ¬m (add_findpost.php)   icon há»“ sÆ¡(tÃªn,avatar,Quyá»n, Há»“ sÆ¡, ÄÄƒng tÃ¬m , Quáº£n trá»‹ bÃ i Ä‘Äƒng,Há»“ sÆ¡, ÄÄƒng xuáº¥t)    
NgÆ°á»i dÃ¹ng chá»§ trá»                            
(=sidebar áº©n hiá»‡n) logo(trá» Ä‘áº¿n trang index cá»§a ngÆ°á»u dÃ¹ng khu vá»±c tÃ¬m trá» staff/index.php)          Danh má»¥c(staff/categorie.php)(chá»©a cÃ¡c danh má»¥c tráº¡ng thÃ¡i má»Ÿ 1 dáº«n Ä‘áº¿n staff/detail_categorie)   TÃ¬m trá» (staff/post.php) ÄÄƒng tÃ¬m (add_post.php)   icon há»“ sÆ¡(tÃªn,avatar,Quyá»n, Há»“ sÆ¡, ÄÄƒng Tin , Quáº£n trá»‹ BÃ i Ä‘Äƒng,Há»“ sÆ¡, ÄÄƒng xuáº¥t)    